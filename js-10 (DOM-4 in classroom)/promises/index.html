<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>promises</title>
  </head>
  <body>
    <h1>Apna College</h1>
    <script>
      // function saveToDb(data, success, failure) {
      //   let internetSpeed = Math.floor(Math.random() * 10) + 1;
      //   if (internetSpeed > 4) {
      //     success();
      //   } else {
      //     failure();
      //   }
      // }

      // saveToDb(
      //   "apna college",
      //   () => {
      //     console.log("success: your data was saved.");
      //     saveToDb(
      //       "hello",
      //       () => {
      //         console.log("success2:data2 saved");
      //         saveToDb(
      //           "abhishek",
      //           () => {
      //             console.log("success3: data3 saved");
      //           },
      //           () => {
      //             console.log("failure3: weak connection");
      //           }
      //         );
      //       },
      //       () => {
      //         console.log("failure2: weak connection");
      //       }
      //     );
      //   },
      //   () => {
      //     console.log("failure: weak connection.data not saved");
      //   }
      // );

      //  refactoring with promises    *********************

      function saveToDb(data) {
        return new Promise((resolve, reject) => {
          let internetSpeed = Math.floor(Math.random() * 10) + 1;
          if (internetSpeed > 4) {
            resolve("success: Data was saved");
          } else {
            reject("Failure: Weak connection");
          }
        });
      }

      // console.log(saveToDb("apna college"));

      // saveToDb("apna college")
      //   .then(() => {
      //     console.log("promise resolved");
      //   })
      //   .catch(() => {
      //     console.log("promise rejected");
      //   });

      //promise chaining   *************

      // saveToDb("apna college")
      //   .then(() => {
      //     console.log("data1 saved");
      //     return saveToDb("helloworld");
      //   })
      //   .then(() => {
      //     console.log("data2 saved");
      //     return saveToDb("abhishek");
      //   })
      //   .then(() => {
      //     console.log("data3 saved");
      //   })
      //   .catch(() => {
      //     console.log("promise rejected");
      //   });

      //results and errors in promises  ************

      saveToDb("apna college")
        .then((result) => {
          console.log("data1 saved");
          console.log(result);
          return saveToDb("helloworld");
        })
        .then((result) => {
          console.log("data2 saved");
          console.log(result);
          return saveToDb("abhishek");
        })
        .then((result) => {
          console.log("data3 saved");
          console.log(result);
        })
        .catch((error) => {
          console.log("promise rejected");
          console.log(error);
        });
    </script>
  </body>
</html>
